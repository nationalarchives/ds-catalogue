{# #TODO: Replace mock archive data with archive data from API #}
{% set mock_archive = {
  'title': 'Shakespeare Birthplace Trust',
  'archon_code': '188',
  'website': 'https://www.shakespeare.org.uk/',
  'address': [
    'The Shakespeare Centre',
    'Henley Street',
    'Stratford-upon-Avon',
    'CV37 6QW',
    'England'
  ],
  'google_place_id': 'ChIJW5dhaqw_e0gRQTRxERErsFU',
  'phone': '01789 204 016',
  'email': 'collections@shakespeare.org.uk',
  'about_archive': '<p><strong>Open:</strong> Monday 10.15-12.30, Tuesday 10.15-3, Wednesday 10.15-12.30 by appointment</p><p><strong>Closed:</strong> Bank holidays; Christmas/New Year</p><ul><li>Wheelchair access</li><li>Proof of identity required</li><li>Readers ticket required</li></ul><p>Two hour appointment slots must by booked in advance. See <a href="https://www.shakespeare.org.uk/">website</a> for details</p><p>Readers will need to provide a letter of recommendation to see certain items - please <a href="mailto:collections@shakespeare.org.uk">email</a> for further details<br>Reprographics: Staff can copy certain items for a small fee; self-service photograph permits (certain items only) - £5 per day</p>',
  'current_catalogue_url': 'https://www.nationalarchives.gov.uk/catalogue/',
} %}

{# Build Google Maps URL #}
{% if mock_archive.google_place_id %}
  {% set google_maps_url = 'https://www.google.com/maps/place/?q=place_id:' ~ mock_archive.google_place_id %}
{% else %}
  {% set maps_query = (mock_archive.title ~ ' ' ~ (mock_archive.address | join(' '))) | urlencode %}
  {% set google_maps_url = 'https://www.google.com/maps/search/?api=1&query=' ~ maps_query %}
{% endif %}

{% extends 'base.html' %}

{% from 'records/macros/top_navigation.html' import top_navigation %}
{% from 'records/macros/callout.html' import callout %}
{% from 'components/button/macro.html' import tnaButton %}

{%- set pageTitle = (record.title or record.summary_title or '[No title]') | striptags -%}

{% block stylesheets %}
{{ super() }}
    <link rel="stylesheet" href="{{ static('record-details.css') }}?v={{ app_config.BUILD_VERSION }}" media="screen,print">
{% endblock %}

{% block beforeContent %}
{{ top_navigation(record, request, show_secondary_navigation=False) }}
{% endblock %}

{% block content %}
<div class="tna-section tna-!--padding-top-l">
  <div class="tna-container">
    <div class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny">
      <hgroup class="tna-hgroup-xl">
        <p class="tna-hgroup__supertitle">Archive</p>
        <h1 class="tna-hgroup__title">{{ pageTitle }}</h1>
      </hgroup>

      <p>Archon code: <strong class="reference">{{ mock_archive.archon_code }}</strong></p>
    </div>
  </div>

  {% call callout(heading='Looking for records?') %}
    <p>Visit the <a href="{{ mock_archive.website }}">{{ pageTitle }} website</a> for information on how to access records held there.</p>
  {% endcall %}

  <div class="tna-container tna-!--margin-top-s">
    <div class="tna-column tna-column--width-1-2">
      <div class="tna-aside tna-aside--tight tna-background-accent-light full-height-aside">
        <h2 class="tna-heading-l">Contact information</h2>

        <dl class="dl-icon-grid">
          <div class="dl-icon-grid__item">
            <i class="dl-icon-grid__icon fa-solid fa-building" aria-hidden="true"></i>
            <dt class="dl-icon-grid__term">
              Address
            </dt>
            <dd class="dl-icon-grid__definition">
              <p>
                {% for line in mock_archive.address %}
                  {{ line }}{% if not loop.last %}<br>{% endif %}
                {% endfor %}
              </p>
            </dd>
          </div>

          <div class="dl-icon-grid__item">
            <i class="dl-icon-grid__icon fa-solid fa-map-marker" aria-hidden="true"></i>
            <dt class="dl-icon-grid__term tna-visually-hidden">
              Map
            </dt>
            <dd class="dl-icon-grid__definition">
              <p><a href="{{ google_maps_url }}">View on a map</a></p>
            </dd>
          </div>

          <div class="dl-icon-grid__item">
            <i class="dl-icon-grid__icon fa-solid fa-phone" aria-hidden="true"></i>
            <dt class="dl-icon-grid__term">
              Telephone
            </dt>
            <dd class="dl-icon-grid__definition">
              <a href="tel:{{ mock_archive.phone|replace(' ', '') }}">{{ mock_archive.phone }}</a>
            </dd>
          </div>

          <div class="dl-icon-grid__item">
            <i class="dl-icon-grid__icon fa-solid fa-envelope" aria-hidden="true"></i>
            <dt class="dl-icon-grid__term">
              Email
            </dt>
            <dd class="dl-icon-grid__definition">
              <a href="mailto:{{ mock_archive.email }}">{{ mock_archive.email }}</a>
            </dd>
          </div>

          <div class="dl-icon-grid__item">
            <i class="dl-icon-grid__icon fa-solid fa-globe" aria-hidden="true"></i>
            <dt class="dl-icon-grid__term">
              Website
            </dt>
            <dd class="dl-icon-grid__definition">
              <a href="{{ mock_archive.website }}">{{ mock_archive.website }}</a>
            </dd>
          </div>
        </dl>
      </div>
    </div>

    <div class="tna-column tna-column--width-1-2">
      <div class="tna-aside tna-aside--tight tna-background-accent-light full-height-aside">
        <h2 class="tna-heading-l">Information about this archive</h2>

        {{ mock_archive.about_archive | tna_html | safe }}
      </div>
    </div>
  </div>

  <div class="tna-container">
    <div class="tna-column tna-column--full tna-!--margin-top-l">
      <h2 class="tna-heading-l">This archive’s collections</h2>
      <p>There are two ways to view all collections from <strong>{{ pageTitle }}</strong></p>
    </div>

    <div class="tna-column tna-column--full tna-!--margin-top-s">
      <div class="tna-aside tna-aside--split tna-aside--tight tna-background-accent-light">

          <div class="tna-aside--split__column">
            <h3 class="tna-heading-m">New catalogue (this website)</h3>
            <p>Available through search results only</p>
            {{ tnaButton({
              'text': 'View all collections in the new catalogue',
              'href': url('main:catalogue'),
              "icon": "chevron-right",
              "classes": "tna-!--margin-top-s",
              "rightAlignIcon": true
            }) }}
          </div>
          <div class="tna-aside--split__column">
            <h3 class="tna-heading-m">Current catalogue</h3>
            <p>Available as search results, lists and to browse</p>
            {{ tnaButton({
              'text': 'View all collections in the current catalogue',
              'href': mock_archive.current_catalogue_url,
              "icon": "chevron-right",
              "classes": "tna-!--margin-top-s",
              "rightAlignIcon": true
            }) }}
          </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}
