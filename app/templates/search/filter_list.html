{% extends "base.html" %}
{% from 'components/breadcrumbs/macro.html' import tnaBreadcrumbs %}
{% from 'components/button/macro.html' import tnaButton %}
{% from 'components/checkboxes/macro.html' import tnaCheckboxes %}
{%- from 'macros/global_alert_banners.html' import global_alert_banners -%}
{% from 'search/macros/render_hidden_fields.html' import render_hidden_fields %}

{%- set pageTitle = 'More filter options' -%}

{% block stylesheets %}
  {{ super() }}
  <link rel="stylesheet" href="{{ static('catalogue-results.css') ~ '?v=' ~ app_config.BUILD_VERSION }}" media="screen,print">
{% endblock stylesheets %}

{% block beforeContent %}
  <div class="tna-background-accent-light">
    <div class="tna-container">
      <div class="tna-column tna-column--full">
        {{ tnaBreadcrumbs({
          'items': [
            {
              'text': 'Home',
              'href': '/'
            },
            {
              'text': 'Catalogue',
              'href': url('main:catalogue')
            },
            {
              'text': 'Search',
              'href': url('search:catalogue')
            }
          ],
          'structuredData': True,
          'classes': 'tna-!--margin-vertical-s'
        }) }}
      </div>
      <div class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny tna-!--margin-top-s tna-!--margin-bottom-m">
        <h1 class="tna-heading-l">Select filters to apply to your results</h1>
      </div>
    </div>
  </div>
{% endblock beforeContent %}
  
{% block content %}
  <form id="long-filters-form" method="get" action="{{ url('search:catalogue') }}"> 
    <div class="tna-container tna-section">
      <div class="tna-column tna-column--full">
        <div class="tna-button-group tna-button-group--small">
          {{ tnaButton({
            'text': 'Apply filters',
            'buttonElement': True,
            'buttonType': 'submit'
          }) }}
          {{ tnaButton({
            'text': 'Cancel and return to results',
            'href': mfc_cancel_and_return_to_search_url,
            'plain': True
          }) }}
        </div>
        {{ tnaCheckboxes({
          'label': request.GET.filter_list | replace('long', ''),
          'headingSize': "m",
          'id': mfc_field.id,
          'name': mfc_field.name,
          'small': True,
          'items': mfc_field.items,
          'formItemClasses': 'tna-checkboxes--grid'
        }) }}
      </div>
    </div>

    <!--COMMENTING OUT 'SEARCH WITH FILTERS' BOX TEMPORALLY-->
    <!-- <div class="tna-container">
      <div id="filter-panel" class="tna-column tna-column--width-1-3 tna-column--width-1-3-medium tna-column--full-small tna-column--full-tiny tna-!--margin-top-m ">
        <div class="tna-aside tna-aside--tight tna-background-tint tna-!--margin-top-s tna-background-accent-light tna-hidden-element">
          <div class="tna-form__group " data-module="tna-text-input">
            <div class="tna-form__group-contents">
              <h3 class="tna-form__heading tna-form__heading--s">
                <label class="tna-form__label" for="search-within">
                Search within filters
                </label>
              </h3>
            </div>
            <input id="search-within" class="tna-text-input " name="search_within" value="" type="text" spellcheck="false" autocapitalize="off" autocorrect="off" form="search-form">
            <p>Already selected filters will remain active.</p>
          </div>
        </div>
      </div>
    </div> -->

    <div class="tna-container tna-section">
      <div class="tna-column tna-column--full">
        <div class="tna-button-group tna-button-group--small">
          {{ tnaButton({
            'text': 'Apply filters',
            'buttonElement': True,
            'buttonType': 'submit'
          }) }}
          {{ tnaButton({
            'text': 'Cancel and return to results',
            'href': mfc_cancel_and_return_to_search_url,
            'plain': True
          }) }}
        </div>
      </div>
    </div>
    {{ render_hidden_fields(request, form, bucket_keys, mfc_field) }}
  </form>

  <div class="tna-background-accent-light">
    {{ global_alert_banners(request, global_alert.global_alert, global_alert.mourning_notice) }}
  </div>
{% endblock content %}

{% block bodyEnd %}
  {{ super() }}
  <script src="{{ static('catalogue-results.min.js') ~ '?v=' ~ app_config.BUILD_VERSION }}" defer></script>
{% endblock bodyEnd %}